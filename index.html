<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <title>Monitoramento da Cozinha</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
    <h2>Dados dos Sensores</h2>
    <canvas id="grafico" width="600" height="300"></canvas>

    <script>
        async function buscarDados() {
            const resp = await fetch("http://localhost:5000/ultimos-dados");
            const dados = await resp.json();

            const labels = dados.map(d => new Date(d.timestamp).toLocaleTimeString());
            const temp = dados.map(d => d.temperatura);
            const umi = dados.map(d => d.umidade);
            const gas = dados.map(d => d.gas);

            new Chart(document.getElementById("grafico"), {
                type: "line",
                data: {
                    labels: labels,
                    datasets: [
                        { label: "Temperatura (°C)", data: temp, borderColor: "red", fill: false },
                        { label: "Umidade (%)", data: umi, borderColor: "blue", fill: false },
                        { label: "Gás (ppm)", data: gas, borderColor: "green", fill: false }
                    ]
                }
            });
        }

        buscarDados();
    </script>
</body>
</html>
